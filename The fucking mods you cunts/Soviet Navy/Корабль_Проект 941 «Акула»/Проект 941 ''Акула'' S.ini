[core]
name: Проект 941 "Акула" S
displayDescription: -Надводный режим \n-Пониженная маневренность \n-Способен строить и запускать ракеты типа Р-39 \n-Вооружен 5-ю тяжелыми торпедами

class: CustomUnitMetadata
price: 95000
maxHp: 9000
mass: 116000

radius: 80
fogOfWarSightRange: 16

transportSlotsNeeded: 5

selfRegenRate: 0.075

nukeOnDeath: true
nukeOnDeathRange: 150
nukeOnDeathDamage: 3800

#builtFrom_1_name: seaFactory
#techLevel: 2
#buildSpeed: 112s

generation_credits: -950
generation_delay: 500

[action_dive]
isVisible: true

convertTo: Проект 941 "Акула" UW
isActive: true
displayType: action
price: 0
text: Погружение
description: Погружение на рабочую глубину
buildSpeed: 1.5s
highPriorityQueue: true
whenBuilding_cannotMove: false
whenBuilding_playAnimation: deploy
pos: 0

[action_surface]
isVisible: true

convertTo: Проект 941 "Акула" S
isActive: false
displayType: action
price: 0
text: Всплытие
description: Всплытие
buildSpeed: 1.5s
highPriorityQueue: true
whenBuilding_cannotMove: false
pos: 1

[action_launchP39]
fireTurretXAtGround: P39
price:  ammo=1

text: Запуск
description: Запуск
displayType: action
isActive: true
buildSpeed: 1.5s
displayRemainingStockpile: true
highPriorityQueue: true
onlyOneUnitAtATime: false
whenBuilding_playAnimation: open
pos: 3

[action_buildP39]
price: 16500
text: Постройка
description: Постройка
displayType: NONE
buildSpeed: 50s
isActive: if self.ammoIncludingQueued(lessThan=20)
addResources: ammo=1
pos: 2

[turret_P39]
x: 5
y: 66.5
canShoot: false
invisible: true

projectile: P39

shoot_sound: nuke_launch
shoot_sound_vol: 0.15
shoot_light: #FFEECCCC
shoot_flame: custom:nukeLaunch_wave, custom:nukeLaunch_light

turnSpeed: 50
limitingRange: 60000
limitingMinRange: 500
resourceUsage: ammo=1

[projectile_P39]
areaDamage: 9500
areaRadius: 250

tags: nuke
spawnUnit: Радиация

life: 99999
speed: 1
targetSpeed: 10
targetSpeedAcceleration: 0.015

friendlyFire: true
targetGround: true
trailEffect: true
largeHitEffect: true
alwaysVisibleInFog: true
areaHitAirAndLandAtSameTime: true
nukeWeapon: true

ballistic: true
ballistic_delaymove_height: 250
ballistic_height: 250

frame: 2
shadowFrame: 1
drawType: 1
lightColor: #FFEEEE00
lightSize: 1

deflectionPower: -1

trailEffect: CUSTOM:projectileTrail
trailEffectRate:4

[graphics]
total_frames: 1

image: Проект 941 S.png
image_wreak: Проект 941_dead.png
image_turret: NONE

imageScale: 0.9

image_shadow: AUTO
shadowOffsetX: 1
shadowOffsetY: 1

movementEffect: CUSTOM:splash
movementEffectRate: 8

[attack]
canAttack: true
canAttackFlyingUnits: false
canAttackLandUnits: true
canAttackUnderwaterUnits: true
canAttackNotTouchingWaterUnits: false

turretSize: 1
turretTurnSpeed: 25

maxAttackRange: 500
shootDelay: 2s

[turret_1Torp]
#torpedo
x: 0
y: 0
invisible: true
idleDir:0

#canAttackFlyingUnits: false
#canAttackLandUnits: false
#canAttackUnderwaterUnits: true
#canAttackNotTouchingWaterUnits: true

#limitingRange: 500
projectile: 1

[turret_2Torp]
#torpedo
x: 0
y: 0

copyFrom: 1Torp

warmup: 0.5s

[projectile_1]
#torpedo
areaDamage: 400
areaRadius: 50
life: 999
speed: 2

trailEffect: true
largeHitEffect: true
targetGround: false

lightColor: #BB99DD

deflectionPower: -1

[movement]
movementType: WATER
moveSpeed: 0.42
moveAccelerationSpeed: 0.015
moveDecelerationSpeed: 0.05

maxTurnSpeed: 0.5
turnAcceleration: 0.05

reverseSpeedPercentage: 0.6

targetHeight: 0
targetHeightDrift: 0.3

[effect_splash]
life: 100
stripIndex: effects
frameIndex: 13

scaleFrom: 2
scaleTo: 1.3
alpha: 0.4
atmospheric: true

fadeInTime: 3
fadeOut: true

dirOffsetRandom: 180

xSpeedAbsoluteRandom: 0.1
ySpeedAbsoluteRandom: 0.1
ySpeedRelative:-0.2

yOffsetRelative: -120

attachedToUnit: false
drawUnderUnits: true

[arm_1]
x: -10
y: 98

image_end: КрылоЛ.png

[arm_2]
x: 10
y: 98

image_end: КрылоП.png

[animation_deploy]

blendIn: 1.2s
#blendOut: 2s

arm1_0: {x: -8, y: 0}
arm2_0: {x: 8, y: 0}

[arm_3]
x: 4.5
y: 66.5

image_end: Крышка.png
drawOverBody: true

[animation_open]
blendIn: 1.25s
blendOut: 1.5s

arm3_0: {x: 5, y: 0}

[effect_projectileTrail]
stripIndex: effects
frameIndex: 0

life: 120
fadeOut: true
attachedToUnit: false
color: #FFFFFF
fadeInTime:5
scaleFrom: 0.5
scaleTo: 3.5
alpha: 0.6
drawUnderUnits: false
atmospheric: true

dirOffsetRandom:180

shadow:true

xSpeedAbsoluteRandom: 0.2
ySpeedAbsoluteRandom: 0.2


[effect_nukeLaunch_wave]
priority:high

stripIndex: shockwave
life: 50
scaleFrom: 0.5
scaleTo: 2.5

[effect_nukeLaunch_light]
image: SHARED:light_50.png
life: 40
fadeOut: true
attachedToUnit: true
color: #FFFFFF
scaleFrom: 1.7
scaleTo: 1.7
alpha: 0.7
drawUnderUnits:false